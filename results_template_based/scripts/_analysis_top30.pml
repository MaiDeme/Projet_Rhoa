cmd.do("run scripts/utils.py")
cmd.do("load_top_rank_pdb_in_consensus InterEvDock3_Top10Consensus.txt, 1")
cmd.do("first_decoy = cmd.get_names('objects')[0]")

cmd.do("set transparency, 0.4")
cmd.do("select /%s//A"%first_decoy)
cmd.do("create chainA_conservation, sele")
cmd.do("select /%s//A"%first_decoy)
cmd.do("create chainA_res_consensus, sele")
cmd.do("select /%s//B+C"%first_decoy)
cmd.do("create chainB_conservation, sele")
cmd.do("select /%s//B+C"%first_decoy)
cmd.do("create chainB_res_consensus, sele")
cmd.do("delete sele %s"%first_decoy)
cmd.do("refresh")

cmd.do("load_top_rank_pdb_in_consensus InterEvDock3_Top10Consensus.txt, 10, Top10Consensus")
cmd.do("group Top10Consensus, action=open")

cmd.do("load_top_rank_pdb_in_dir ISCh_models, 10, InterEvDock3_Top10Consensus.txt, ISCh")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir SPP_models, 10, InterEvDock3_Top10Consensus.txt, SPP")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir SPPh_models, 10, InterEvDock3_Top10Consensus.txt, SPPh")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir IES_models, 10, InterEvDock3_Top10Consensus.txt, IES")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir IESh_models, 10, InterEvDock3_Top10Consensus.txt, IESh")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir ISC_models, 10, InterEvDock3_Top10Consensus.txt, ISC")
cmd.do("refresh")
cmd.do("load_top_rank_pdb_in_dir frodock_models, 10, InterEvDock3_Top10Consensus.txt, FRODOCK")
cmd.do("refresh")
cmd.do("disable all")
cmd.do("enable chainA_conservation chainB_res_consensus")

cmd.do("hide everything")
cmd.do("show cartoon, *")
cmd.do("color_b /*//A, gradient=wyr")
cmd.do("refresh")
cmd.do("color_b /*//B+C, gradient=wcb")
cmd.do("refresh")

cmd.do("refresh")
cmd.do("analyze_complex ch1=A,ch2=B+C")
cmd.do("delete interface_*")
cmd.do("refresh")
cmd.do("show surface, chainA_conservation")
cmd.do("show surface, chainB_conservation")


cmd.do("refresh")
cmd.do("color_b /chainA_conservation//A, gradient=wyr")
cmd.do("color_b /chainB_conservation//B+C, gradient=wcb")
cmd.do("color_b chainA_res_consensus,q,gradient=wg")
cmd.do("color_b chainB_res_consensus,q,gradient=wg")

cmd.do("select_top_5_residue_consensus consensus_top5_residues.txt")
cmd.do("deselect")
